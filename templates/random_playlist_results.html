<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    {{ bootstrap.load_css() }}
    <title>Random Playlist</title>
</head>
<body>
    <h1>Random Playlist</h1>
    {% include '/partials/nav.html' %}
    
    <!-- display random playlist -->
    <div class="container">
        <div class="row">
        {% for track in results %}
            <div class="col-md-6 mb-4">
            <div class="card shadow-sm h-100">
                <!-- image of song -->
                <img src="{{ track.album.images[0].url }}" class="card-img-top" alt="Album art of {{ track.name }}">
                <div class="card-body">
                    <!-- song info -->
                    <h5 class="card-title">{{ track.name }}</h5>
                    <p class="card-text">by {{ track.artists[0].name }}</p>
                    <!-- listen to song -->
                    <a href="{{ track.external_urls.spotify }}" class="btn btn-success btn-sm mb-2" target="_blank">üéß Listen</a>
                    <!-- link for more detailed view of song -->
                    <a href="{{ url_for('song_info', track_id=track.id) }}" class="btn btn-info btn-sm mb-2" target="_blank">‚ÑπÔ∏è Info</a>
                    
                    <!-- hidden info of song -->
                    <form action="{{ url_for('likedSongs') }}" method="post">
                        <input type="hidden" name="songID" value="{{ track['id'] }}">
                        <input type="hidden" name="songURL" value="{{ track['external_urls']['spotify'] }}">
                        <input type="hidden" name="imageURL" value="{{ track['album']['images'][0]['url'] }}">
                        <input type="hidden" name="songName" value="{{ track['name'] }}">
                        <input type="hidden" name="trackQuery" value="{{ track_name }}">
                        <button type="submit" class="btn btn-like btn-sm mb-2">‚ù§Ô∏è Like</button>
                    </form>
        
                    {% if request.args.get('liked') == track.id %}
                        <!-- add to liked songs -->
                        <div class="mt-2 alert alert-success">{{ request.args.get('message') }}</div>
                    {% endif %}
                </div>
            </div>
            </div>
        {% endfor %}
        </div>
    </div>

    <!-- form for saving playlist -->
    <form action="/save_random_playlist">
        <div class="input-group mb-3">
            <!-- text input for name of playlist -->
            <span class="input-group-text" id="inputGroup-sizing-default">Name of playlist</span>
            <input name="playlist_name" type="text" class="form-control" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default">
        </div>
        <div class="input-group mb-3">
            <!-- text input for description of playlist -->
            <span class="input-group-text" id="inputGroup-sizing-default">Playlist description</span>
            <input name="playlist_desc" type="text" class="form-control" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default">
        </div>
        <!-- all the song's IDs -->
        <input type="hidden" name="song1" value="{{ results[0]['id'] }}">
        <input type="hidden" name="song2" value="{{ results[1]['id'] }}">
        <input type="hidden" name="song3" value="{{ results[2]['id'] }}">
        <input type="hidden" name="song4" value="{{ results[3]['id'] }}">
        <input type="hidden" name="song5" value="{{ results[4]['id'] }}">
        <input type="hidden" name="song6" value="{{ results[5]['id'] }}">
        <!-- submit form -->
        <button type="submit" class="btn btn-primary">Save Playlist</button>
    </form>
</body>
</html>
